<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veteran Legacy Life - Mobile</title>
    <meta name="description" content="Exclusive 2025 life insurance benefits for veterans, active service members, and their families. Get whole life, term life, and IUL coverage with living benefits.">
    <meta name="robots" content="index,follow">
    <link rel="canonical" href="https://veteranlegacylife.com/mobile.html">
    <link rel="alternate" media="only screen and (min-width: 768px)" href="https://veteranlegacylife.com/">
    <meta name="theme-color" content="#1A2C42">
    <meta name="keywords" content="veteran life insurance, military life insurance, term life, whole life, IUL, living benefits">
    <meta name="author" content="Veteran Legacy Life">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Veteran Legacy Life">
    <meta property="og:title" content="Veteran Legacy Life - Insurance Benefits for Veterans">
    <meta property="og:description" content="Exclusive 2025 life insurance benefits for veterans, active service members, and their families. Get whole life, term life, and IUL coverage with living benefits.">
    <meta property="og:url" content="https://veteranlegacylife.com/mobile.html">
    <meta property="og:image" content="https://veteranlegacylife.com/production/armyhouseFULL.png">
    <meta property="og:image:alt" content="Veteran Legacy Life">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Veteran Legacy Life - Insurance Benefits for Veterans">
    <meta name="twitter:description" content="Exclusive 2025 life insurance benefits for veterans, active service members, and their families. Get whole life, term life, and IUL coverage with living benefits.">
    <meta name="twitter:image" content="https://veteranlegacylife.com/production/armyhouseFULL.png">

    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
    <link rel="apple-touch-icon" href="/logo.png">
    <link rel="preload" as="image" href="/production/armyhouseFULL.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Veteran Funnel Styles -->
    <link rel="stylesheet" href="assets/index-f3d073f2.css">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Veteran Legacy Life",
      "url": "https://veteranlegacylife.com/",
      "logo": "https://veteranlegacylife.com/logo.png",
      "contactPoint": [{
        "@type": "ContactPoint",
        "telephone": "+1-503-764-5097",
        "contactType": "customer service",
        "areaServed": "US"
      }]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Veteran Legacy Life",
      "url": "https://veteranlegacylife.com/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://veteranlegacylife.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <!-- Desktop Detection and Redirect -->
    <script>
      (function() {
        // Check if user is on desktop device
        function isDesktop() {
          return !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && 
                 window.innerWidth > 768;
        }
        
        // Only redirect if on desktop and on mobile page
        if (isDesktop() && window.location.pathname.includes('mobile.html')) {
          window.location.href = '/';
        }
      })();
    </script>

    <!-- Analytics/Ads Loader (config-driven, no-op without IDs) -->
    <script>
      (function() {
        var cfg = (window.VeteranFunnelConfig && window.VeteranFunnelConfig.TRACKING) || null;
        if (!cfg) return;
        // Google Tag Manager
        if (cfg.GTM) {
          (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
          })(window,document,'script','dataLayer',cfg.GTM);
        }
        // GA4 / Google Ads via gtag
        var ids = [];
        if (cfg.GA4) ids.push(cfg.GA4);
        if (cfg.GADS) ids.push(cfg.GADS);
        if (ids.length) {
          var gs = document.createElement('script');
          gs.async = true;
          gs.src = 'https://www.googletagmanager.com/gtag/js?id=' + encodeURIComponent(ids[0]);
          document.head.appendChild(gs);
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);} 
          window.gtag = gtag;
          gtag('js', new Date());
          ids.forEach(function(id){ gtag('config', id, { send_page_view: true }); });
        }
      })();
    </script>
    
    <style>
        /* Mobile-First CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            background: white;
            font-size: 16px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #1e293b;
            background-color: #ffffff;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        /* Mobile-First Variables */
        :root {
            --primary-color: #1e3a8a;
            --primary-dark: #1e40af;
            --secondary-color: #dc2626;
            --accent-color: #fbbf24;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --text-white: #ffffff;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Mobile Typography */
        h1 { font-size: 2rem; font-weight: 700; line-height: 1.2; margin-bottom: 1rem; }
        h2 { font-size: 1.75rem; font-weight: 600; line-height: 1.3; margin-bottom: 0.875rem; }
        h3 { font-size: 1.5rem; font-weight: 600; line-height: 1.3; margin-bottom: 0.75rem; }
        h4 { font-size: 1.25rem; font-weight: 600; line-height: 1.4; margin-bottom: 0.625rem; }
        h5 { font-size: 1.125rem; font-weight: 500; line-height: 1.4; margin-bottom: 0.5rem; }
        h6 { font-size: 1rem; font-weight: 500; line-height: 1.4; margin-bottom: 0.5rem; }

        p {
            margin-bottom: 1rem;
            color: var(--text-light);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Mobile Header */
        .mobile-header {
            background: var(--bg-white);
            padding: 0.75rem 1rem 0.5rem 1rem;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .mobile-header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 100%;
            text-align: center;
            gap: 0.25rem;
        }

        .mobile-logo {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-bottom: 0;
        }

        .mobile-logo img {
            height: 3.5rem;
            width: auto;
        }

        .mobile-logo span {
            font-size: 1.375rem;
            font-weight: 800;
            color: #1A2C42;
            letter-spacing: 0.5px;
        }

        .mobile-logo sup {
            font-size: 0.7em;
            font-weight: 700;
            color: #1A2C42;
            vertical-align: super;
            margin-left: 1px;
        }

        .mobile-phone {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            color: #1A2C42;
            font-weight: 500;
            font-size: 0.8rem;
            background: white;
            padding: 0.375rem 0.75rem;
            border-radius: 0.375rem;
            border: 1.5px solid #1A2C42;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            opacity: 0.95;
        }

        .mobile-phone:hover {
            background: #f8f9fa;
            transform: translateY(-1px);
            opacity: 1;
        }

        .mobile-phone i {
            font-size: 0.875rem;
        }

        /* Mobile Hero Section */
        .mobile-hero {
            background: var(--bg-white);
            padding: 0;
            margin: 0;
        }

        .mobile-hero-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }

        .mobile-hero-content {
            background: #1A2C42;
            color: var(--text-white);
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .mobile-hero h1 {
            color: var(--text-white);
            font-size: 1.75rem;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .mobile-hero p {
            color: var(--text-white);
            opacity: 0.9;
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }

        .mobile-cta-button {
            background: white;
            color: #1A2C42;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            animation: pulse-attention 2s ease-in-out infinite;
        }

        .mobile-cta-button:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
        }

        .mobile-fine-print {
            font-size: 0.6rem !important;
            color: rgba(255, 255, 255, 0.7) !important;
            text-align: center;
            margin-top: 0.5rem;
            font-weight: 400;
        }

        @keyframes pulse-attention {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(26, 44, 66, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(26, 44, 66, 0.5);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(26, 44, 66, 0.3);
            }
        }

        /* Mobile Features Section */
        .mobile-features {
            padding: 3rem 1.5rem;
            background: var(--bg-light);
        }

        .mobile-features h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--text-dark);
        }

        .mobile-feature-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .mobile-feature-card {
            background: var(--bg-white);
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 8px 25px rgba(26, 44, 66, 0.15), 0 4px 10px rgba(26, 44, 66, 0.1);
            text-align: center;
            border: 1px solid #1A2C42;
            transform: translateY(0);
            transition: all 0.3s ease;
            position: relative;
        }

        .mobile-feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(26, 44, 66, 0.2), 0 6px 15px rgba(26, 44, 66, 0.15);
        }

        .mobile-feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(26, 44, 66, 0.02) 0%, rgba(26, 44, 66, 0.05) 100%);
            border-radius: 0.75rem;
            pointer-events: none;
        }

        .mobile-feature-icon {
            width: 2.5rem;
            height: 2.5rem;
            background: #1A2C42;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.75rem;
            color: white;
            font-size: 1rem;
        }

        .mobile-feature-card h3 {
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .mobile-feature-card p {
            color: var(--text-light);
            font-size: 0.8rem;
            line-height: 1.4;
        }

        /* Mobile Comparison Section */
        .mobile-comparison {
            padding: 3rem 1.5rem;
            background: var(--bg-white);
        }

        .mobile-comparison h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--text-dark);
        }

        .mobile-comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
            overflow-x: auto;
            display: block;
            white-space: nowrap;
        }

        .mobile-comparison-table thead {
            display: table-header-group;
        }

        .mobile-comparison-table tbody {
            display: table-row-group;
        }

        .mobile-comparison-table tr {
            display: table-row;
        }

        .mobile-comparison-table th,
        .mobile-comparison-table td {
            display: table-cell;
            padding: 0.75rem 0.5rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            word-wrap: break-word;
            white-space: normal;
        }

        .mobile-comparison-table th {
            background: var(--primary-color);
            color: var(--text-white);
            font-weight: 600;
        }

        .mobile-comparison-table td {
            background: var(--bg-white);
        }

        .mobile-comparison-table tr:nth-child(even) td {
            background: var(--bg-light);
        }

        /* Mobile Footer */
        .mobile-footer {
            background: var(--text-dark);
            color: var(--text-white);
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .mobile-footer p {
            color: var(--text-white);
            opacity: 0.8;
            font-size: 0.875rem;
        }

        .mobile-footer-phone {
            margin-top: 1rem;
        }

        .mobile-footer-phone-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-white);
            text-decoration: none;
            font-size: 1rem;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }

        .mobile-footer-phone-link:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .mobile-footer-phone-link i {
            font-size: 1rem;
        }

        .mobile-footer-logos {
            margin-top: 0.75rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
        }
        .mobile-footer-logos img {
            height: 24px;
            max-height: 24px;
            width: auto;
            object-fit: contain;
            vertical-align: middle;
            opacity: 0.95;
        }
        /* Make TrustedSite (1st) and BBB (3rd) slightly larger to match NIPR */
        .mobile-footer-logos img:nth-child(1),
        .mobile-footer-logos img:nth-child(3) {
            height: 28px;
            max-height: 28px;
        }
        /* Explicit sizing per logo */
        .mobile-footer-logos img[alt="Trusted Site"] {
            height: 47px; /* 30% larger than previous 36px */
            max-height: 47px;
        }
        .mobile-footer-logos img[alt="BBB A+"] {
            height: 34px; /* ~40% larger than base 24px */
            max-height: 34px;
        }
         
 
        /* Mobile Responsive Adjustments */
        @media (min-width: 768px) {
            .mobile-hero h1 {
                font-size: 2.25rem;
            }
            
            .mobile-feature-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .mobile-comparison-table {
                font-size: 1rem;
            }
        }

        @media (min-width: 1024px) {
            .mobile-hero h1 {
                font-size: 2.5rem;
            }
            
            .mobile-feature-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Hide desktop elements */
        .desktop-only {
            display: none !important;
        }

        /* Mobile-specific utilities */
        .mobile-text-center { text-align: center; }
        .mobile-text-left { text-align: left; }
        .mobile-text-right { text-align: right; }
        .mobile-mb-1 { margin-bottom: 0.5rem; }
        .mobile-mb-2 { margin-bottom: 1rem; }
        .mobile-mb-3 { margin-bottom: 1.5rem; }
        .mobile-mb-4 { margin-bottom: 2rem; }
        .mobile-mt-1 { margin-top: 0.5rem; }
        .mobile-mt-2 { margin-top: 1rem; }
        .mobile-mt-3 { margin-top: 1.5rem; }
        .mobile-mt-4 { margin-top: 2rem; }
        .mobile-p-1 { padding: 0.5rem; }
        .mobile-p-2 { padding: 1rem; }
        .mobile-p-3 { padding: 1.5rem; }
        .mobile-p-4 { padding: 2rem; }

        /* Mobile Funnel Modal Styles */
        .mobile-funnel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .mobile-funnel-modal {
            background: white;
            border-radius: 1rem;
            width: 100%;
            max-width: 100%;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .mobile-funnel-header {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f8fafc;
        }

        .mobile-funnel-progress {
            flex: 1;
        }

        .mobile-progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .mobile-progress-fill {
            height: 100%;
            background: #1A2C42;
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 12.5%; /* 1/8 steps */
        }

        .mobile-progress-text {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 500;
        }

        .mobile-funnel-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0.25rem;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .mobile-funnel-close:hover {
            background: #e5e7eb;
        }

        .mobile-funnel-content {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .mobile-funnel-step h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1A2C42;
            margin-bottom: 0.5rem;
        }

        .mobile-funnel-step p {
            color: #6b7280;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .mobile-funnel-step {
            transition: opacity 0.3s ease;
        }

        .mobile-funnel-step.auto-advancing {
            opacity: 0.7;
        }

        .mobile-radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .mobile-radio-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
        }

        .mobile-radio-option:hover {
            border-color: #1A2C42;
            background: #f8fafc;
        }

        .mobile-radio-option input[type="radio"] {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #1A2C42;
        }

        .mobile-radio-option span {
            font-weight: 500;
            color: #374151;
        }

        .mobile-form-group {
            margin-bottom: 1rem;
        }

        .mobile-birthday-group {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .mobile-birthday-group .mobile-form-input {
            max-width: 280px;
            width: 100%;
        }

        .mobile-name-row {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .mobile-name-group {
            flex: 1;
            margin-bottom: 0;
        }

        .mobile-form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }

        .mobile-form-input {
            width: 100%;
            padding: 0.875rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
            min-height: 44px;
            transition: border-color 0.2s ease;
        }

        .mobile-form-input:focus {
            outline: none;
            border-color: #1A2C42;
            box-shadow: 0 0 0 3px rgba(26, 44, 66, 0.1);
        }

        .mobile-consent-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }

        .mobile-consent-section h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
        }

        .mobile-checkbox-option {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1rem;
            cursor: pointer;
        }

        .mobile-checkbox-option input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #1A2C42;
            margin-top: 0.125rem;
        }

        .mobile-consent-text {
            flex: 1;
        }

        .mobile-consent-main {
            font-size: 0.875rem;
            line-height: 1.4;
            color: #374151;
            font-weight: 500;
            display: block;
            margin-bottom: 0.5rem;
        }

        .mobile-consent-details {
            font-size: 0.75rem;
            line-height: 1.4;
            color: #6b7280;
            margin-top: 0;
        }

        /* Searchable Select Styles */
        .mobile-searchable-select {
            position: relative;
            width: 100%;
        }

        .mobile-search-input {
            width: 100%;
            padding: 0.875rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
            min-height: 44px;
            background-color: white;
            transition: border-color 0.2s ease;
        }

        .mobile-search-input:focus {
            outline: none;
            border-color: #1A2C42;
            box-shadow: 0 0 0 3px rgba(26, 44, 66, 0.1);
        }

        .mobile-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e5e7eb;
            border-top: none;
            border-radius: 0 0 0.5rem 0.5rem;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .mobile-dropdown-option {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            font-size: 0.875rem;
            transition: background-color 0.2s ease;
        }

        .mobile-dropdown-option:hover {
            background-color: #f8fafc;
        }

        .mobile-dropdown-option:last-child {
            border-bottom: none;
        }

        .mobile-dropdown-option.hidden {
            display: none;
        }

        .mobile-funnel-navigation {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 0.75rem;
            background: #f8fafc;
        }

        .mobile-funnel-btn {
            flex: 1;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 44px;
        }

        .mobile-funnel-btn:disabled {
            opacity: 0.5 !important;
            cursor: not-allowed !important;
            background-color: #9ca3af !important;
        }

        .mobile-funnel-btn:disabled:hover {
            background-color: #9ca3af !important;
            transform: none !important;
        }

        .mobile-funnel-back {
            background: #f3f4f6;
            color: #374151;
        }

        .mobile-funnel-back:hover {
            background: #e5e7eb;
        }

        .mobile-funnel-continue {
            background: #9ca3af;
            color: #6b7280;
            opacity: 0.5;
        }

        .mobile-funnel-continue:hover:not(:disabled) {
            background: #0f172a;
        }


        .mobile-success-step {
            text-align: center;
        }

        .mobile-success-icon {
            width: 4rem;
            height: 4rem;
            background: #059669;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .mobile-success-details {
            margin-top: 2rem;
            text-align: left;
        }

        .mobile-success-details h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
        }

        .mobile-success-details ul {
            list-style: none;
            padding: 0;
        }

        .mobile-success-details li {
            padding: 0.5rem 0;
            color: #6b7280;
            position: relative;
            padding-left: 1.5rem;
        }

        .mobile-success-details li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #059669;
            font-weight: bold;
        }

        /* Mobile Loading Step Styles */
        .mobile-loading-step {
            text-align: center;
        }

        .mobile-loading-icon {
            width: 4rem;
            height: 4rem;
            background: #059669;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }

        .mobile-spinner {
            width: 2rem;
            height: 2rem;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: mobileSpin 1s linear infinite;
        }

        @keyframes mobileSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .mobile-loading-text {
            color: #6b7280;
            margin-bottom: 1.5rem;
        }

        .mobile-next-steps {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .mobile-next-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .mobile-next-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #1A2C42;
        }

        .mobile-next-card h3 {
            color: #1A2C42;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.375rem;
        }

        .mobile-next-card p {
            color: #6b7280;
            font-size: 0.75rem;
            line-height: 1.4;
        }

        /* Updated Mobile Success Step Styles */
        .mobile-success-text {
            color: #6b7280;
            margin-bottom: 2rem;
        }

        .mobile-agent-assignment {
            margin-top: 2rem;
        }

        .mobile-business-card {
            width: 100%;
            max-width: 300px;
            height: auto;
            border-radius: 12px;
            border: 2px solid #000;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin: 0 auto 1.5rem;
            display: block;
        }

        .mobile-agent-bio {
            color: #475569;
            font-size: 0.875rem;
            line-height: 1.6;
            text-align: center;
            margin-bottom: 1.5rem;
            padding: 0 1rem;
        }

        .mobile-trust-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .mobile-trust-badge {
            height: 40px;
            width: auto;
            object-fit: contain;
        }

        .mobile-call-notice {
            color: #6b7280;
            font-size: 0.875rem;
            font-style: italic;
            text-align: center;
            margin-top: 1rem;
        }

        .mobile-done-button {
            background: #1A2C42;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 32px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .mobile-done-button:hover {
            background: #233552;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .mobile-done-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Scroll Animations for Mobile */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .animate-on-scroll.animated {
            opacity: 1;
            transform: translateY(0);
        }

        .animate-on-scroll.fade-in-left {
            transform: translateX(-20px);
        }

        .animate-on-scroll.fade-in-left.animated {
            transform: translateX(0);
        }

        .animate-on-scroll.fade-in-right {
            transform: translateX(20px);
        }

        .animate-on-scroll.fade-in-right.animated {
            transform: translateX(0);
        }

        .animate-on-scroll.scale-in {
            transform: scale(0.95);
        }

        .animate-on-scroll.scale-in.animated {
            transform: scale(1);
        }

        /* Staggered animations for mobile feature cards */
        .animate-on-scroll.stagger-1 { transition-delay: 0.1s; }
        .animate-on-scroll.stagger-2 { transition-delay: 0.2s; }
        .animate-on-scroll.stagger-3 { transition-delay: 0.3s; }
        .animate-on-scroll.stagger-4 { transition-delay: 0.4s; }
    </style>
</head>
<body>
    <!-- Mobile Header -->
    <header class="mobile-header">
        <div class="mobile-header-content">
            <div class="mobile-logo">
                <img src="logo.png" alt="Veteran Legacy Life">
                <span>Veteran Legacy Life<sup>®</sup></span>
            </div>
             <a href="tel:+15037645097" class="mobile-phone">
                 <i class="fas fa-phone"></i>
                 <span>CALL NOW</span>
             </a>
        </div>
    </header>

    <!-- Mobile Hero Section -->
    <section class="mobile-hero animate-on-scroll">
        <img src="production/armyhouseFULL.png" alt="Veteran Family" class="mobile-hero-image">
        <div class="mobile-hero-content">
            <h1>Simple. Affordable. Guaranteed Coverage for Veterans.</h1>
            <p>Join the 50,000+ Veterans who have secured their legacy.</p>
            <button class="mobile-cta-button" onclick="openMobileFunnel()">
                Get Protected Today!
            </button>
            <p class="mobile-fine-print">No obligation or commitment required.</p>
        </div>
    </section>

    <!-- Mobile Features Section -->
    <section class="mobile-features animate-on-scroll">
        <h2>Why Choose Veteran Legacy Life?</h2>
        <div class="mobile-feature-grid">
            <div class="mobile-feature-card animate-on-scroll stagger-1" onclick="openMobileFunnel()" style="cursor: pointer;">
                <div class="mobile-feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>No Medical Exam</h3>
                <p>Qualified veterans can get coverage without a medical exam</p>
            </div>
            <div class="mobile-feature-card animate-on-scroll stagger-2" onclick="openMobileFunnel()" style="cursor: pointer;">
                <div class="mobile-feature-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <h3>Affordable Rates</h3>
                <p>Exclusive veteran discounts and competitive rates that NEVER INCREASE.</p>
            </div>
            <div class="mobile-feature-card animate-on-scroll stagger-3" onclick="openMobileFunnel()" style="cursor: pointer;">
                <div class="mobile-feature-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <h3>Living Benefits</h3>
                <p>Access your benefits while you're alive for chronic illness, terminal illness, or critical illness.</p>
            </div>
            <div class="mobile-feature-card animate-on-scroll stagger-4" onclick="openMobileFunnel()" style="cursor: pointer;">
                <div class="mobile-feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3>Instant Coverage</h3>
                <p>No 2-year waiting period. Coverage is active instantly.</p>
            </div>
        </div>
    </section>


    <!-- Mobile Footer -->
    <footer class="mobile-footer animate-on-scroll">
        <p>Licensed in all 50 states. Coverage subject to underwriting approval. · <a href="/privacy.html" style="color:#cbd5e1; text-decoration: underline;">Privacy Policy</a></p>
        <div class="mobile-footer-phone">
            <a href="tel:+15037645097" class="mobile-footer-phone-link">
                <i class="fas fa-phone"></i>
                <span>CALL NOW</span>
            </a>
            <div class="mobile-footer-logos">
                <img src="/production/trustedsitelogo.png" alt="Trusted Site">
                <img src="/production/NIPR.png" alt="NIPR Licensed">
                <img src="/production/BBBB.png" alt="BBB A+">
            </div>
        </div>
        <p style="margin-top: 0.75rem; opacity: 0.8;">&copy; 2025 Veteran Legacy Life. All rights reserved.</p>
    </footer>

    <!-- Mobile Funnel Modal -->
    <div id="mobileFunnelModal" class="mobile-funnel-overlay" style="display: none;">
        <div class="mobile-funnel-modal">
            <!-- Funnel Header -->
            <div class="mobile-funnel-header">
                <div class="mobile-funnel-progress">
                    <div class="mobile-progress-bar">
                        <div class="mobile-progress-fill" id="mobileProgressFill"></div>
                    </div>
                    <div class="mobile-progress-text">
                        <span id="mobileCurrentStep">1</span> of <span id="mobileTotalSteps">8</span>
                    </div>
                </div>
                <button class="mobile-funnel-close" onclick="closeMobileFunnel()">&times;</button>
            </div>

            <!-- Funnel Content -->
            <div class="mobile-funnel-content" id="mobileFunnelContent">
                <!-- Step content will be loaded here -->
            </div>

            <!-- Funnel Navigation -->
            <div class="mobile-funnel-navigation">
                <button class="mobile-funnel-btn mobile-funnel-back" id="mobileBackBtn" onclick="goToPreviousStep()" style="display: none;">
                    Back
                </button>
                <button class="mobile-funnel-btn mobile-funnel-continue" id="mobileContinueBtn" onclick="goToNextStep()">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Mobile Funnel State Management
        let mobileFunnelState = {
            currentStep: 1,
            totalSteps: 9,
            sessionId: generateSessionId(),
            formData: {
                state: '',
                militaryStatus: '',
                branchOfService: '',
                maritalStatus: '',
                coverageAmount: '',
                birthday: '',
                contactInfo: {
                    firstName: '',
                    lastName: '',
                    email: '',
                    phone: '',
                    transactionalConsent: false,
                    marketingConsent: false
                }
            }
        };

        // Generate unique session ID for Google Sheets tracking
        function generateSessionId() {
            return 'mobile_session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Google Apps Script Configuration
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzYU1-57qc-KcsOMzUu27pF4fOY4XSVhLikeQqZ2P7pbmeloONN2xxQ2aeOdNl74CkY8w/exec';

        // Main funnel opening function
        function openMobileFunnel() {
            console.log('Opening mobile funnel...');
            document.getElementById('mobileFunnelModal').style.display = 'flex';
            loadMobileFunnelStep(1);
        }

        // State selection functions
        function filterStates(searchTerm) {
            const dropdown = document.getElementById('stateDropdown');
            const options = dropdown.querySelectorAll('.mobile-dropdown-option');
            const term = searchTerm.toLowerCase();
            
            options.forEach(option => {
                const stateName = option.textContent.toLowerCase();
                if (stateName.includes(term)) {
                    option.classList.remove('hidden');
                } else {
                    option.classList.add('hidden');
                }
            });
            
            // Show dropdown if there are visible options
            const visibleOptions = dropdown.querySelectorAll('.mobile-dropdown-option:not(.hidden)');
            if (visibleOptions.length > 0 && searchTerm.length > 0) {
                dropdown.style.display = 'block';
            } else if (searchTerm.length === 0) {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        function showStateDropdown() {
            const dropdown = document.getElementById('stateDropdown');
            const searchInput = document.getElementById('stateSearchInput');
            if (searchInput.value.length === 0) {
                dropdown.style.display = 'block';
            }
        }

        function hideStateDropdown() {
            // Delay hiding to allow clicks on options
            setTimeout(() => {
                const dropdown = document.getElementById('stateDropdown');
                dropdown.style.display = 'none';
            }, 200);
        }

        function selectState(stateCode, stateName) {
            const searchInput = document.getElementById('stateSearchInput');
            const dropdown = document.getElementById('stateDropdown');
            
            searchInput.value = stateName;
            dropdown.style.display = 'none';
            
            // Update form data and trigger auto-advance
            updateFormData('state', stateCode);
        }

        function closeMobileFunnel() {
            document.getElementById('mobileFunnelModal').style.display = 'none';
        }

        function loadMobileFunnelStep(step) {
            mobileFunnelState.currentStep = step;
            updateProgressBar();
            updateNavigationButtons();
            
            const content = document.getElementById('mobileFunnelContent');
            
            switch(step) {
                case 1:
                    content.innerHTML = getStateSelectionHTML();
                    break;
                case 2:
                    content.innerHTML = getMilitaryStatusHTML();
                    break;
                case 3:
                    content.innerHTML = getBranchOfServiceHTML();
                    break;
                case 4:
                    content.innerHTML = getMaritalStatusHTML();
                    break;
                case 5:
                    content.innerHTML = getCoverageAmountHTML();
                    break;
                case 6:
                    content.innerHTML = getBirthdayHTML();
                    break;
                case 7:
                    content.innerHTML = getContactInfoHTML();
                    break;
                case 8:
                    content.innerHTML = getLoadingHTML();
                    // Auto-advance to success after 5.5 seconds
                    setTimeout(() => goToNextStep(), 5500);
                    break;
                case 9:
                    content.innerHTML = getSuccessHTML();
                    break;
            }
            
            // Update next button state for all steps
            setTimeout(() => updateNextButtonState(), 100);
        }

        function updateProgressBar() {
            const progressFill = document.getElementById('mobileProgressFill');
            const currentStepSpan = document.getElementById('mobileCurrentStep');
            const totalStepsSpan = document.getElementById('mobileTotalSteps');
            
            const progress = (mobileFunnelState.currentStep / mobileFunnelState.totalSteps) * 100;
            progressFill.style.width = progress + '%';
            currentStepSpan.textContent = mobileFunnelState.currentStep;
            totalStepsSpan.textContent = mobileFunnelState.totalSteps;
        }

        function updateNavigationButtons() {
            const backBtn = document.getElementById('mobileBackBtn');
            const continueBtn = document.getElementById('mobileContinueBtn');
            
            // Show/hide back button
            if (mobileFunnelState.currentStep === 1) {
                backBtn.style.display = 'none';
            } else {
                backBtn.style.display = 'inline-block';
            }
            
            // Update continue button text
            if (mobileFunnelState.currentStep === 7) {
                continueBtn.textContent = 'Submit';
                continueBtn.style.display = 'inline-block';
            } else if (mobileFunnelState.currentStep === 8 || mobileFunnelState.currentStep === 9) {
                // Hide navigation buttons for loading and success steps
                continueBtn.style.display = 'none';
                backBtn.style.display = 'none';
            } else {
                continueBtn.textContent = 'Continue';
                continueBtn.style.display = 'inline-block';
            }
        }

        function goToNextStep() {
            // Check if current step is contact info and validate required fields
            if (mobileFunnelState.currentStep === 7) {
                if (!isContactInfoValid()) {
                    return; // Don't proceed if contact info is not valid
                }
                // Submit form data to Google Sheets when completing contact info
                submitMobileFormData();
            }
            
            if (mobileFunnelState.currentStep < mobileFunnelState.totalSteps) {
                loadMobileFunnelStep(mobileFunnelState.currentStep + 1);
            }
        }

        function isContactInfoValid() {
            const contactInfo = mobileFunnelState.formData.contactInfo;
            return contactInfo && 
                   contactInfo.firstName && 
                   contactInfo.lastName && 
                   contactInfo.email && 
                   contactInfo.phone &&
                   isValidPhoneNumber(contactInfo.phone) &&
                   contactInfo.transactionalConsent &&
                   contactInfo.marketingConsent;
        }

        function isValidPhoneNumber(phone) {
            // Remove all non-digit characters
            const digits = phone.replace(/\D/g, '');
            // Check if it's 10 digits (US phone number)
            return digits.length === 10;
        }

        function validatePhoneNumber(input) {
            const phone = input.value;
            const isValid = isValidPhoneNumber(phone);
            
            // Add visual feedback
            if (phone && !isValid) {
                input.style.borderColor = '#dc2626';
                input.style.backgroundColor = '#fef2f2';
            } else {
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            }
            
            // Update continue button state
            updateNextButtonState();
        }

        function updateNextButtonState() {
            const continueBtn = document.getElementById('mobileContinueBtn');
            if (!continueBtn) return;
            
            let isValid = false;
            
            // Check if current step is valid based on step number
            switch (mobileFunnelState.currentStep) {
                case 1: // State Selection
                    isValid = !!mobileFunnelState.formData.state;
                    break;
                case 2: // Military Status
                    isValid = !!mobileFunnelState.formData.militaryStatus;
                    break;
                case 3: // Branch of Service
                    isValid = !!mobileFunnelState.formData.branchOfService;
                    break;
                case 4: // Marital Status
                    isValid = !!mobileFunnelState.formData.maritalStatus;
                    break;
                case 5: // Coverage Amount
                    isValid = !!mobileFunnelState.formData.coverageAmount;
                    break;
                case 6: // Birthday
                    isValid = !!mobileFunnelState.formData.birthday;
                    break;
                case 7: // Contact Info
                    isValid = isContactInfoValid();
                    break;
                case 8: // Loading
                case 9: // Success
                    isValid = true; // Always enabled for final steps
                    break;
                default:
                    isValid = false;
            }
            
            if (isValid) {
                continueBtn.disabled = false;
                continueBtn.style.opacity = '1';
                continueBtn.style.cursor = 'pointer';
                continueBtn.style.backgroundColor = '#1A2C42';
                continueBtn.style.color = 'white';
            } else {
                continueBtn.disabled = true;
                continueBtn.style.opacity = '0.5';
                continueBtn.style.cursor = 'not-allowed';
                continueBtn.style.backgroundColor = '#9ca3af';
                continueBtn.style.color = '#6b7280';
            }
        }

        function goToPreviousStep() {
            if (mobileFunnelState.currentStep > 1) {
                loadMobileFunnelStep(mobileFunnelState.currentStep - 1);
            }
        }

        function updateFormData(field, value) {
            mobileFunnelState.formData[field] = value;
            console.log('Updated form data:', mobileFunnelState.formData);
            
            // Update next button state
            updateNextButtonState();
            
            // Auto-advance logic
            checkAndAutoAdvance();
        }

        function checkAndAutoAdvance() {
            const currentStep = mobileFunnelState.currentStep;
            const formData = mobileFunnelState.formData;
            
            // Check if current step is complete and auto-advance
            switch(currentStep) {
                case 1: // State Selection
                    if (formData.state) {
                        showAutoAdvanceFeedback();
                        setTimeout(() => goToNextStep(), 500);
                    }
                    break;
                case 2: // Military Status
                    if (formData.militaryStatus) {
                        showAutoAdvanceFeedback();
                        setTimeout(() => goToNextStep(), 500);
                    }
                    break;
                case 3: // Branch of Service
                    if (formData.branchOfService) {
                        showAutoAdvanceFeedback();
                        setTimeout(() => goToNextStep(), 500);
                    }
                    break;
                case 4: // Marital Status
                    if (formData.maritalStatus) {
                        showAutoAdvanceFeedback();
                        setTimeout(() => goToNextStep(), 500);
                    }
                    break;
                case 5: // Coverage Amount
                    if (formData.coverageAmount) {
                        showAutoAdvanceFeedback();
                        setTimeout(() => goToNextStep(), 500);
                    }
                    break;
                case 6: // Birthday
                    // No auto-advance for birthday step
                    break;
                case 7: // Contact Info
                    if (formData.contactInfo && 
                        formData.contactInfo.firstName && 
                        formData.contactInfo.lastName && 
                        formData.contactInfo.email && 
                        formData.contactInfo.phone &&
                        formData.contactInfo.transactionalConsent &&
                        formData.contactInfo.marketingConsent) {
                        showAutoAdvanceFeedback();
                        setTimeout(() => goToNextStep(), 500);
                    }
                    break;
                case 8: // Loading
                    // Auto-advance handled in loadMobileFunnelStep
                    break;
            }
        }

        function showAutoAdvanceFeedback() {
            const stepElement = document.querySelector('.mobile-funnel-step');
            if (stepElement) {
                stepElement.classList.add('auto-advancing');
            }
        }

        function updateContactInfo(field, value) {
            mobileFunnelState.formData.contactInfo[field] = value;
            console.log('Updated contact info:', mobileFunnelState.formData.contactInfo);
            
            // Update next button state
            updateNextButtonState();
            
            // Auto-advance logic for contact info
            checkAndAutoAdvance();
        }

        function updateInputField(field, value) {
            mobileFunnelState.formData[field] = value;
            console.log('Updated input field:', field, value);
            
            // Update next button state for all fields
            updateNextButtonState();
            
            // Auto-advance logic (except for birthday)
            if (field !== 'birthday') {
                checkAndAutoAdvance();
            }
        }

        // Submit mobile form data to Google Sheets
        async function submitMobileFormData() {
            try {
                console.log('Submitting mobile form data to Google Sheets...');
                
                // Prepare data in the same format as desktop version
                const payload = {
                    sessionId: mobileFunnelState.sessionId,
                    formType: 'Lead',
                    contactInfo: mobileFunnelState.formData.contactInfo,
                    preQualification: {
                        state: mobileFunnelState.formData.state,
                        militaryStatus: mobileFunnelState.formData.militaryStatus,
                        branchOfService: mobileFunnelState.formData.branchOfService,
                        maritalStatus: mobileFunnelState.formData.maritalStatus,
                        coverageAmount: mobileFunnelState.formData.coverageAmount
                    },
                    medicalAnswers: {
                        tobaccoUse: '',
                        medicalConditions: [],
                        height: '',
                        weight: '',
                        hospitalCare: '',
                        diabetesMedication: '',
                        age: mobileFunnelState.formData.birthday ? calculateAge(mobileFunnelState.formData.birthday) : ''
                    },
                    applicationData: {
                        streetAddress: '',
                        city: '',
                        state: mobileFunnelState.formData.state,
                        zipCode: '',
                        beneficiaries: [{ name: '', relationship: '', percentage: 100 }],
                        vaClinicName: '',
                        primaryDoctor: '',
                        ssn: '',
                        driversLicense: '',
                        licenseState: mobileFunnelState.formData.state,
                        bankName: '',
                        routingNumber: '',
                        accountNumber: ''
                    },
                    quoteData: {
                        policyDate: new Date().toISOString().split('T')[0],
                        coverage: mobileFunnelState.formData.coverageAmount,
                        premium: '',
                        age: mobileFunnelState.formData.birthday ? calculateAge(mobileFunnelState.formData.birthday) : '',
                        gender: '',
                        type: ''
                    },
                    trackingData: {
                        currentStep: '7',
                        stepName: 'Contact Information'
                    }
                };
                
                // Convert to URL-encoded format
                const params = new URLSearchParams();
                for (const [key, value] of Object.entries(payload)) {
                    if (typeof value === 'object') {
                        params.append(key, JSON.stringify(value));
                    } else {
                        params.append(key, String(value));
                    }
                }
                
                // Submit to Google Apps Script
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: params.toString()
                });
                
                if (!response.ok) {
                    throw new Error('Failed to submit form data');
                }
                
                const responseText = await response.text();
                console.log('Mobile form submission response:', responseText);
                
                // Parse response
                let result;
                if (responseText.startsWith('{') || responseText.startsWith('[')) {
                    try {
                        result = JSON.parse(responseText);
                    } catch (e) {
                        result = { success: false, error: 'Invalid JSON response' };
                    }
                } else if (responseText.includes('=')) {
                    const responseParams = new URLSearchParams(responseText);
                    result = {
                        success: responseParams.get('success') === 'true',
                        error: responseParams.get('error') || null,
                        message: responseParams.get('message') || null
                    };
                } else {
                    result = { success: true, message: responseText };
                }
                
                console.log('Mobile form data submitted successfully:', result);
                try {
                    if (window && window.gtag) {
                        // Google Ads conversion if configured
                        const cfg = (window.VeteranFunnelConfig && window.VeteranFunnelConfig.TRACKING) || {};
                        if (cfg && cfg.CONVERSION) {
                            window.gtag('event', 'conversion', { send_to: cfg.CONVERSION });
                        } else {
                            // Generic GA4 lead event
                            window.gtag('event', 'generate_lead', { method: 'mobile_funnel' });
                        }
                    } else if (window && window.dataLayer) {
                        window.dataLayer.push({ event: 'mobile_lead_submitted' });
                    }
                } catch (e) {
                    console.warn('Tracking event failed:', e);
                }
                
            } catch (error) {
                console.error('Error submitting mobile form data:', error);
                // Continue with the funnel even if submission fails
            }
        }

        // Calculate age from birthday
        function calculateAge(birthday) {
            const today = new Date();
            const birthDate = new Date(birthday);
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age.toString();
        }

        // Step HTML Generators
        function getStateSelectionHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Select Your State</h2>
                    <p>Please select your state of residence to get started.</p>
                     <div class="mobile-form-group">
                         <label class="mobile-form-label">State of Residence</label>
                         <div class="mobile-searchable-select">
                             <input type="text" 
                                    class="mobile-search-input" 
                                    placeholder="Type to search states..." 
                                    oninput="filterStates(this.value)"
                                    onfocus="showStateDropdown()"
                                    onblur="hideStateDropdown()"
                                    id="stateSearchInput">
                             <div class="mobile-dropdown" id="stateDropdown" style="display: none;">
                                 <div class="mobile-dropdown-option" onclick="selectState('AL', 'Alabama')">Alabama</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('AK', 'Alaska')">Alaska</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('AZ', 'Arizona')">Arizona</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('AR', 'Arkansas')">Arkansas</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('CA', 'California')">California</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('CO', 'Colorado')">Colorado</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('CT', 'Connecticut')">Connecticut</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('DE', 'Delaware')">Delaware</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('FL', 'Florida')">Florida</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('GA', 'Georgia')">Georgia</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('HI', 'Hawaii')">Hawaii</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('ID', 'Idaho')">Idaho</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('IL', 'Illinois')">Illinois</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('IN', 'Indiana')">Indiana</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('IA', 'Iowa')">Iowa</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('KS', 'Kansas')">Kansas</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('KY', 'Kentucky')">Kentucky</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('LA', 'Louisiana')">Louisiana</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('ME', 'Maine')">Maine</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MD', 'Maryland')">Maryland</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MA', 'Massachusetts')">Massachusetts</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MI', 'Michigan')">Michigan</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MN', 'Minnesota')">Minnesota</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MS', 'Mississippi')">Mississippi</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MO', 'Missouri')">Missouri</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('MT', 'Montana')">Montana</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NE', 'Nebraska')">Nebraska</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NV', 'Nevada')">Nevada</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NH', 'New Hampshire')">New Hampshire</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NJ', 'New Jersey')">New Jersey</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NM', 'New Mexico')">New Mexico</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NY', 'New York')">New York</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('NC', 'North Carolina')">North Carolina</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('ND', 'North Dakota')">North Dakota</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('OH', 'Ohio')">Ohio</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('OK', 'Oklahoma')">Oklahoma</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('OR', 'Oregon')">Oregon</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('PA', 'Pennsylvania')">Pennsylvania</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('RI', 'Rhode Island')">Rhode Island</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('SC', 'South Carolina')">South Carolina</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('SD', 'South Dakota')">South Dakota</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('TN', 'Tennessee')">Tennessee</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('TX', 'Texas')">Texas</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('UT', 'Utah')">Utah</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('VT', 'Vermont')">Vermont</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('VA', 'Virginia')">Virginia</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('WA', 'Washington')">Washington</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('WV', 'West Virginia')">West Virginia</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('WI', 'Wisconsin')">Wisconsin</div>
                                 <div class="mobile-dropdown-option" onclick="selectState('WY', 'Wyoming')">Wyoming</div>
                             </div>
                         </div>
                     </div>
                </div>
            `;
        }

        function getMilitaryStatusHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Military Status</h2>
                    <p>What is your current military status?</p>
                    <div class="mobile-radio-group">
                        <label class="mobile-radio-option">
                            <input type="radio" name="militaryStatus" value="veteran" onchange="updateFormData('militaryStatus', 'veteran')">
                            <span>Veteran</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="militaryStatus" value="active" onchange="updateFormData('militaryStatus', 'active')">
                            <span>Active Duty</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="militaryStatus" value="reserve" onchange="updateFormData('militaryStatus', 'reserve')">
                            <span>Reserve/Guard</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="militaryStatus" value="spouse" onchange="updateFormData('militaryStatus', 'spouse')">
                            <span>Military Spouse</span>
                        </label>
                    </div>
                </div>
            `;
        }

        function getBranchOfServiceHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Branch of Service</h2>
                    <p>Which branch of service did you serve in?</p>
                    <div class="mobile-radio-group">
                        <label class="mobile-radio-option">
                            <input type="radio" name="branchOfService" value="army" onchange="updateFormData('branchOfService', 'army')">
                            <span>Army</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="branchOfService" value="navy" onchange="updateFormData('branchOfService', 'navy')">
                            <span>Navy</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="branchOfService" value="airforce" onchange="updateFormData('branchOfService', 'airforce')">
                            <span>Air Force</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="branchOfService" value="marines" onchange="updateFormData('branchOfService', 'marines')">
                            <span>Marines</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="branchOfService" value="coastguard" onchange="updateFormData('branchOfService', 'coastguard')">
                            <span>Coast Guard</span>
                        </label>
                    </div>
                </div>
            `;
        }

        function getMaritalStatusHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Marital Status</h2>
                    <p>What is your current marital status?</p>
                    <div class="mobile-radio-group">
                        <label class="mobile-radio-option">
                            <input type="radio" name="maritalStatus" value="single" onchange="updateFormData('maritalStatus', 'single')">
                            <span>Single</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="maritalStatus" value="married" onchange="updateFormData('maritalStatus', 'married')">
                            <span>Married</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="maritalStatus" value="divorced" onchange="updateFormData('maritalStatus', 'divorced')">
                            <span>Divorced</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="maritalStatus" value="widowed" onchange="updateFormData('maritalStatus', 'widowed')">
                            <span>Widowed</span>
                        </label>
                    </div>
                </div>
            `;
        }

        function getCoverageAmountHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Coverage Amount</h2>
                    <p>How much life insurance coverage would you like?</p>
                    <div class="mobile-radio-group">
                        <label class="mobile-radio-option">
                            <input type="radio" name="coverageAmount" value="25000" onchange="updateFormData('coverageAmount', '25000')">
                            <span>$25,000</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="coverageAmount" value="50000" onchange="updateFormData('coverageAmount', '50000')">
                            <span>$50,000</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="coverageAmount" value="100000" onchange="updateFormData('coverageAmount', '100000')">
                            <span>$100,000</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="coverageAmount" value="250000" onchange="updateFormData('coverageAmount', '250000')">
                            <span>$250,000</span>
                        </label>
                        <label class="mobile-radio-option">
                            <input type="radio" name="coverageAmount" value="500000" onchange="updateFormData('coverageAmount', '500000')">
                            <span>$500,000+</span>
                        </label>
                    </div>
                </div>
            `;
        }

        function getBirthdayHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Date of Birth</h2>
                    <p>Please enter your date of birth.</p>
                    <div class="mobile-birthday-group">
                        <input type="date" class="mobile-form-input" onchange="updateInputField('birthday', this.value)" required>
                    </div>
                </div>
            `;
        }

        function getContactInfoHTML() {
            return `
                <div class="mobile-funnel-step">
                    <h2>Contact Information</h2>
                    <p>Please provide your contact information so we can get in touch with you about your quote.</p>
                    
                    <div class="mobile-name-row">
                        <div class="mobile-form-group mobile-name-group">
                            <label class="mobile-form-label">First Name</label>
                            <input type="text" class="mobile-form-input" placeholder="First name" onchange="updateContactInfo('firstName', this.value)" required>
                        </div>
                        
                        <div class="mobile-form-group mobile-name-group">
                            <label class="mobile-form-label">Last Name</label>
                            <input type="text" class="mobile-form-input" placeholder="Last name" onchange="updateContactInfo('lastName', this.value)" required>
                        </div>
                    </div>
                    
                    <div class="mobile-form-group">
                        <label class="mobile-form-label">Email Address</label>
                        <input type="email" class="mobile-form-input" placeholder="Enter your email address" onchange="updateContactInfo('email', this.value)" required>
                    </div>
                    
                    <div class="mobile-form-group">
                        <label class="mobile-form-label">Phone Number</label>
                        <input type="tel" class="mobile-form-input" placeholder="Enter your phone number" onchange="updateContactInfo('phone', this.value)" oninput="validatePhoneNumber(this)" required>
                    </div>
                    
                    <div class="mobile-consent-section">
                        <h3>Required Consents</h3>
                        <label class="mobile-checkbox-option">
                            <input type="checkbox" onchange="updateContactInfo('transactionalConsent', this.checked)" required>
                            <div class="mobile-consent-text">
                                <div class="mobile-consent-details">
                                    By checking this box, I consent to receive transactional messages from Veteran Legacy Life related to my account, orders, or services I have requested. These messages may include appointment reminders, order confirmations, and account notifications among others. We will not share your private information with third parties for marketing purposes. Message frequency may vary. Message & Data rates may apply. Reply HELP for help or STOP to opt-out.
                                </div>
                            </div>
                        </label>
                        <label class="mobile-checkbox-option">
                            <input type="checkbox" onchange="updateContactInfo('marketingConsent', this.checked)" required>
                            <div class="mobile-consent-text">
                                <div class="mobile-consent-details">
                                    By checking this box, I consent to receive marketing and promotional messages from Veteran Legacy Life, including special offers, discounts, new product updates among others. We will not share your private information with third parties for marketing purposes. Message frequency may vary. Message & Data rates may apply. Reply HELP for help or STOP to opt-out.
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
            `;
        }

        function getLoadingHTML() {
            return `
                <div class="mobile-funnel-step mobile-loading-step">
                    <div class="mobile-loading-icon">
                        <div class="mobile-spinner"></div>
                    </div>
                    <h2>Loading...</h2>
                    
                    <div class="mobile-next-steps">
                        <div class="mobile-next-card">
                            <div class="mobile-next-icon">👤</div>
                            <h3>No Obligation Concierge Call</h3>
                            <p>A licensed specialist will help review your information and provide tailored recommendations of which A-rated carriers may be best fits.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function getSuccessHTML() {
            return `
                <div class="mobile-funnel-step mobile-success-step">
                    <div class="mobile-success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2>Success!</h2>
                    <p class="mobile-success-text">Your assigned agent will reach out within 24 hours to consult.</p>
                    
                    <div class="mobile-agent-assignment">
                        <img class="mobile-business-card" src="/production/bestcard.png" alt="Michael Alfieri - Licensed Agent" />
                        
                        <div class="mobile-agent-bio">
                            <strong>ABOUT MR. ALFIERI:</strong> Michael is one of the top-producing agents with Veteran Legacy Life and an industry-leading professional. Born and raised in Oregon, he comes from a big Catholic family of 6 kids. 5 years ago he retired from playing Professional Football in Europe and he decided to follow in his father's footsteps to pursue a career in Insurance, dedicated to helping families secure their financial futures.
                        </div>
                        
                        <div class="mobile-trust-badges">
                            <img class="mobile-trust-badge" src="/production/NIPR.png" alt="NIPR - National Insurance Producer Registry" />
                            <img class="mobile-trust-badge" src="/production/BBBblue.png" alt="BBB A+ Rating" />
                        </div>
                        
                        <p class="mobile-call-notice">
                            Look out for Michael's call from a (503) area code.
                        </p>
                        
                        <button class="mobile-done-button" onclick="closeMobileFunnel()">
                            Done
                        </button>
                    </div>
                </div>
            `;
        }

        // Enhanced mobile experience
        document.addEventListener('DOMContentLoaded', function() {
            // Add touch-friendly interactions
            const buttons = document.querySelectorAll('.mobile-cta-button');
            buttons.forEach(button => {
                button.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });
                button.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });

            // Smooth scrolling for anchor links
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            // Check if funnel is loaded and add fallback
            setTimeout(() => {
                console.log('✅ Mobile funnel is self-contained and ready');
            }, 2000);

            // Scroll Animations for Mobile
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -30px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animated');
                    }
                });
            }, observerOptions);

            // Observe all elements with animate-on-scroll class
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            animatedElements.forEach(el => {
                observer.observe(el);
            });
        });
    </script>

</body>
</html>
